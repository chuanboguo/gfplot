<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get PBS data — get_data • gfplot</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get PBS data — get_data" />

<meta property="og:description" content="Automates fisheries and research survey data extraction from DFO Pacific
groundfish databases. The output datasets feed into other functions (tidy_,
plot_, or fit_ functions) for data visualization, which can be used as
products themselves or can be fed into automated DFO Pacific groundfish data
synopsis report production." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gfplot</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pbs-assess/gfplot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get PBS data</h1>
    <small class="dont-index">Source: <a href='https://github.com/pbs-assess/gfplot/blob/master/R/get-dat.R'><code>R/get-dat.R</code></a></small>
    <div class="hidden name"><code>get_data.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Automates fisheries and research survey data extraction from DFO Pacific
groundfish databases. The output datasets feed into other functions (<code>tidy_</code>,
<code>plot_</code>, or <code>fit_</code> functions) for data visualization, which can be used as
products themselves or can be fed into automated DFO Pacific groundfish data
synopsis report production.</p>
    
    </div>

    <pre class="usage"><span class='fu'>get_ssids</span>()

<span class='fu'>get_major_areas</span>()

<span class='fu'>get_management_areas</span>()

<span class='fu'>get_fishery_ids</span>()

<span class='fu'>get_species_groups</span>()

<span class='fu'>get_gear_types</span>()

<span class='fu'>get_age_methods</span>()

<span class='fu'>get_other_surveys</span>()

<span class='fu'>get_survey_sets</span>(<span class='no'>species</span>, <span class='kw'>ssid</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>16</span>, <span class='fl'>2</span>, <span class='fl'>14</span>, <span class='fl'>22</span>, <span class='fl'>36</span>),
  <span class='kw'>join_sample_ids</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>get_survey_samples</span>(<span class='no'>species</span>, <span class='kw'>ssid</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>remove_bad_data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>unsorted_only</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>usability</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>get_iphc_sets</span>(<span class='no'>species</span>, <span class='kw'>usability</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>get_iphc_sets_info</span>()

<span class='fu'>get_iphc_skates_info</span>()

<span class='fu'>get_iphc_hooks</span>(<span class='no'>species</span>, <span class='kw'>usability</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>get_commercial_samples</span>(<span class='no'>species</span>, <span class='kw'>unsorted_only</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>usability</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>get_catch</span>(<span class='no'>species</span>)

<span class='fu'>get_cpue_spatial</span>(<span class='no'>species</span>)

<span class='fu'>get_cpue_spatial_ll</span>(<span class='no'>species</span>)

<span class='fu'>get_cpue_index</span>(<span class='kw'>gear</span> <span class='kw'>=</span> <span class='st'>"bottom trawl"</span>, <span class='kw'>min_cpue_year</span> <span class='kw'>=</span> <span class='fl'>1996</span>)

<span class='fu'>get_age_precision</span>(<span class='no'>species</span>)

<span class='fu'>get_survey_index</span>(<span class='no'>species</span>, <span class='kw'>ssid</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>get_management</span>(<span class='kw'>species</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>species_group</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>fishery</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>area</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>start_year</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>get_sara_dat</span>()

<span class='fu'>cache_pbs_data</span>(<span class='no'>species</span>, <span class='kw'>file_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='kw'>compress</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>unsorted_only</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>historic_cpue</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>survey_sets</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>cache_pbs_data_iphc</span>(<span class='no'>species</span>, <span class='kw'>file_name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='kw'>compress</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>species</th>
      <td><p>One or more species common names (e.g. <code>"pacific ocean perch"</code>) or one or more species codes (e.g. <code>396</code>). Species codes can be
specified as numeric vectors <code>c(396, 442</code>) or characters <code>c("396", "442")</code>.
Numeric values shorter than 3 digits will be expanded to 3 digits and
converted to character objects (<code>1</code> turns into <code>"001"</code>). Species common
names and species codes should not be mixed. If any element is missing a
species code, then all elements will be assumed to be species common
names.</p></td>
    </tr>
    <tr>
      <th>ssid</th>
      <td><p>A numeric vector of survey series IDs. Run <code>get_ssids()</code> for a
look-up table of available survey series IDs with surveys series
descriptions.</p></td>
    </tr>
    <tr>
      <th>join_sample_ids</th>
      <td><p>If <code>TRUE</code> then the sample IDs will be joined in. This
may result in repeated rows of data if the same sample ID is part of
different survey stratifications.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>If <code>TRUE</code> then extra messages were reprinted during data
extraction. Useful to monitor progress.</p></td>
    </tr>
    <tr>
      <th>remove_bad_data</th>
      <td><p>Remove known bad data, such as unrealistic
length or weight values.</p></td>
    </tr>
    <tr>
      <th>unsorted_only</th>
      <td><p>Remove sorted biological data ('keepers' and 'discards'
and unknown). Default = TRUE.</p></td>
    </tr>
    <tr>
      <th>usability</th>
      <td><p>A vector of usability codes to include. Defaults to all.
IPHC codes may be different to other surveys.</p></td>
    </tr>
    <tr>
      <th>gear</th>
      <td><p>The gear type(s) to include for CPUE. Will be converted to
uppercase. Run <code>get_gear_types()</code> for a look-up table of available
gear types to select from.</p></td>
    </tr>
    <tr>
      <th>min_cpue_year</th>
      <td><p>Minimum year for the CPUE data.</p></td>
    </tr>
    <tr>
      <th>species_group</th>
      <td><p>Species group code(s) to include (see lookup table
<code>get_species_groups()</code>). Defaults to all.</p></td>
    </tr>
    <tr>
      <th>fishery</th>
      <td><p>The fishery_id code(s) (see lookup table <code>get_fishery_ids()</code>)
for fisheries to include in data extraction. Defaults to all.</p></td>
    </tr>
    <tr>
      <th>area</th>
      <td><p>The fishery area(s) (see lookup table <code>get_management_areas()</code>)
to include in data extraction (eg. '5A'; c('3C', '3D', '5A', '5B')).</p></td>
    </tr>
    <tr>
      <th>start_year</th>
      <td><p>The minimum year to include management actions.
Defaults to all.</p></td>
    </tr>
    <tr>
      <th>file_name</th>
      <td><p>Optional filename(s) for the cached file. Defaults to the
same as the <code>species</code> argument.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>The folder where the cached data will be saved.</p></td>
    </tr>
    <tr>
      <th>compress</th>
      <td><p>Compress the <code>.rds</code> file? Defaults to <code>FALSE</code> for faster
reading and writing at the expense of disk space.</p></td>
    </tr>
    <tr>
      <th>historic_cpue</th>
      <td><p>Logical for whether historical CPUE should be included.</p></td>
    </tr>
    <tr>
      <th>survey_sets</th>
      <td><p>Logical for whether the survey set data should be
extracted. You might set this to <code>FALSE</code> if you don't need these data and
you want to substantially speed up data extraction.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The <code>get_*</code> functions return a data frame. The <code>cache_pbs_data()</code>
function writes an <code>.rds</code> file to <code>path</code> for each specified species. A data
object for a single species is a named list object with each element
containing a data frame from a <code>get_*</code> function. The element name of the list
reflects the function name with the <code>get_</code> part removed. For example, the
output from <code>get_survey_samples()</code> is in a list element named
<code>survey_samples()</code>.</p>
<p>The <code><a href='get_all_iphc_set_counts.html'>get_all_iphc_set_counts()</a></code> function returns a data frame.
The <code>cache_pbs_data_iphc()</code>
function writes an <code>.rds</code> file to <code>path</code> for each specified species. A data
object for a single species is a named list object with one element
containing the data frame from <code><a href='get_all_iphc_set_counts.html'>get_all_iphc_set_counts()</a></code>.
The element name of the list is <code>set_counts</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <ul>
<li><p><code>get_ssids()</code> produces a lookup table for survey series IDs and
descriptions</p></li>
<li><p><code>get_age_methods()</code> produces a lookup table for ageing method codes
and descriptions</p></li>
<li><p><code>get_sample_trips()</code>produces a lookup table for sample ID and
fishing event ID</p></li>
<li><p><code>get_strata_areas()</code> produces a lookup table for surveyed area for
each stratum within surveys</p></li>
<li><p><code>get_survey_ids()</code> produces lookup table for survey IDs for a given
survey series ID</p></li>
<li><p><code>get_survey_sets()</code> extracts survey catch data and spatial data for
plotting survey catchs on a map of British Columbia.</p></li>
<li><p><code>get_survey_samples()</code> extracts all biological sample specimen records
from research surveys for given species and survey series IDs from GFBio</p></li>
<li><p><code>get_commercial_samples()</code> extracts all biological sample specimen records
from commercial data for given species from GFBio</p></li>
<li><p><code>get_catch()</code> extracts all landing and discard records for a given species
from GFFOS.GF_MERGED_CATCH</p></li>
<li><p><code>get_cpue_spatial()</code> extracts catch, effort and spatial data from
GFFOS.GF_D_OFFICIAL_CATCH for the groundfish trawl fishery</p></li>
<li><p><code>get_cpue_spatial_ll()</code> extracts catch, effort and spatial data from
GFFOS.GF_D_OFFICIAL_CATCH for the longline fishery</p></li>
<li><p><code>get_cpue_index()</code> extracts catch and effort data from
GFFOS.GF_MERGED_CATCH for the groundfish trawl fishery since 1996.</p></li>
<li><p><code><a href='get_cpue_historical.html'>get_cpue_historical()</a></code> extracts historical catch and effort data back into
the 1950s. It's help file is on a separate page; see the link.</p></li>
<li><p><code>get_age_precision()</code> extracts age readings from biological samples for a
given species where there is a second ('precision') age reading</p></li>
<li><p><code>get_sara_dat()</code> scrubs Species At Risk website for up-to-date species
status and listings</p></li>
<li><p><code>get_survey_index()</code> extracts survey catch data for given species
and survey series IDs</p></li>
<li><p><code>get_iphc_sets()</code> extracts IPHC survey data at the set level for given
species, from 2003 to present (excluding 2013 which is not in database)</p></li>
<li><p><code>get_iphc_sets_info()</code> extracts IPHC survey data regarding each set, with no
species information, to give one unique row (with lat, lon etc.) for each
set, from 2003 to present (excluding 2013 which is not in database)</p></li>
<li><p><code>get_iphc_skates_info()</code> extracts IPHC survey data regarding each skate,
with no species information, to give one unique row (with lat, lon etc.)
for each set, from 2003 to present (excluding 2013 which is not in database);
needed for the hooks per skate</p></li>
<li><p><code>get_iphc_hooks()</code> extracts IPHC survey data at the hook level for given
species, from 2003 to present (excluding 2013 which is not in database)</p></li>
<li><p><code>cache_pbs_data()</code> runs all 'get' functions in the gfplot package
(except those specific to IPHC data) and caches extracted data to a given
folder</p></li>
<li><p><code>cache_pbs_data_iphc()</code> runs <code>get_all_iphc_set_counts</code> for a given species
and caches extracted data to a give folder</p></li>
</ul>
    <p>This <code>cache_pbs_data()</code> function caches data from</p><ul>
<li><p><code>get_survey_samples()</code></p></li>
<li><p><code>get_commercial_samples()</code></p></li>
<li><p><code>get_catch()</code></p></li>
<li><p><code>get_cpue_spatial()</code></p></li>
<li><p><code>get_cpue_spatial_ll()</code></p></li>
<li><p><code>get_survey_index()</code></p></li>
<li><p><code>get_age_precision()</code></p></li>
<li><p>and optionally from <code>get_survey_sets()</code> and <code><a href='get_cpue_historical.html'>get_cpue_historic()</a></code></p></li>
</ul>
    <p>This <code>cache_pbs_data_iphc()</code> function caches the data for the given
species from <code><a href='get_all_iphc_set_counts.html'>get_all_iphc_set_counts()</a></code></p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    
    <p><code>get_*</code> functions only extract data when performed on a computer connected to
the Pacific Biological Station DFO network.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"># NOT RUN {
## Import survey catch density and location data by tow or set for plotting
## Specify single or multiple species by common name or species code and
## single or multiple survey series id(s).
get_survey_sets(species = "lingcod", ssid = 1)

## Import survey or commercial biological data for various plots
(eg. length frequency, growth, age frequency, maturity, etc.)
get_survey_samples(species = 442, ssid = c(1, 3, 4, 16))

get_commercial_samples(c(442, 397))

## Import catch data by species for barcharts of landings by fishing area,
## geartype, and year.
get_catch("lingcod")

## Import spatial commercial catch per unit effort data for trawl or longline
## data by species for plotting along BC coast.
get_cpue_spatial("lingcod")
get_cpue_spatial_ll("yelloweye rockfish")

## Import catch and effort data by gear type for modelling commercial trawl
## cpue index.
get_cpue_index(gear = "bottom trawl", min_cpue_year = 2012)

## Import survey bootstrapped biomass estimates for plotting relative biomass
## indices by specified survey series.
get_survey_index("pacific cod", ssid = c(1, 3, 4, 16))
# }
<div class='input'>
</div><span class='co'># NOT RUN {</span>
<span class='fu'>cache_pbs_data_iphc</span>(<span class='st'>"redbanded rockfish"</span>)
<span class='fu'>cache_pbs_data_iphc</span>(<span class='fu'>c</span>(<span class='st'>"redbanded rockfish"</span>,
                      <span class='st'>"pacific ocean perch"</span>,
                      <span class='st'>"made up species"</span>) )
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sean C. Anderson, Elise A. Keppel, Andrew M. Edwards, Chris Grandin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

