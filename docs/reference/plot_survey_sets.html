<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot the output from a geostatistical model of survey data — plot_survey_sets • gfplot</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Plot the output from a geostatistical model of survey data — plot_survey_sets" />

<meta property="og:description" content="Takes the output from fit_survey_sets() and creates a map of the model
predictions and/or the raw data. Includes a number of options for customizing
the map including the ability to rotate the map." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gfplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pbs-assess/gfplot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot the output from a geostatistical model of survey data</h1>
    <small class="dont-index">Source: <a href='https://github.com/pbs-assess/gfplot/blob/master/R/surveys-spatial.R'><code>R/surveys-spatial.R</code></a></small>
    <div class="hidden name"><code>plot_survey_sets.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Takes the output from <code><a href='survey-spatial-modelling.html'>fit_survey_sets()</a></code> and creates a map of the model
predictions and/or the raw data. Includes a number of options for customizing
the map including the ability to rotate the map.</p>
    
    </div>

    <pre class="usage"><span class='fu'>plot_survey_sets</span>(<span class='no'>pred_dat</span>, <span class='no'>raw_dat</span>, <span class='kw'>fill_column</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"combined"</span>, <span class='st'>"bin"</span>,
  <span class='st'>"pos"</span>), <span class='kw'>fill_scale</span> <span class='kw'>=</span> <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_viridis'>scale_fill_viridis_c</a></span>(<span class='kw'>trans</span> <span class='kw'>=</span> <span class='st'>"sqrt"</span>,
  <span class='kw'>option</span> <span class='kw'>=</span> <span class='st'>"C"</span>), <span class='kw'>colour_scale</span> <span class='kw'>=</span> <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_viridis'>scale_colour_viridis_c</a></span>(<span class='kw'>trans</span> <span class='kw'>=</span>
  <span class='st'>"sqrt"</span>, <span class='kw'>option</span> <span class='kw'>=</span> <span class='st'>"C"</span>), <span class='kw'>pos_pt_col</span> <span class='kw'>=</span> <span class='st'>"#FFFFFF60"</span>,
  <span class='kw'>bin_pt_col</span> <span class='kw'>=</span> <span class='st'>"#FFFFFF40"</span>, <span class='kw'>pos_pt_fill</span> <span class='kw'>=</span> <span class='st'>"#FFFFFF05"</span>,
  <span class='kw'>pt_size_range</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.5</span>, <span class='fl'>9</span>), <span class='kw'>show_legend</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>extrapolate_depth</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>extrapolation_buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>show_model_predictions</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>show_raw_data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>utm_zone</span> <span class='kw'>=</span> <span class='fl'>9</span>,
  <span class='kw'>fill_label</span> <span class='kw'>=</span> <span class='st'>"Predicted\nbiomass\ndensity (kg/m^2)"</span>,
  <span class='kw'>pt_label</span> <span class='kw'>=</span> <span class='st'>"Tow density (kg/km^2)"</span>, <span class='kw'>rotation_angle</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>rotation_center</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>500</span>, <span class='fl'>5700</span>), <span class='kw'>show_axes</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>x_buffer</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(-<span class='fl'>5</span>, <span class='fl'>5</span>), <span class='kw'>y_buffer</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(-<span class='fl'>5</span>, <span class='fl'>5</span>),
  <span class='kw'>north_symbol</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>north_symbol_coord</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>130</span>, <span class='fl'>5975</span>),
  <span class='kw'>north_symbol_length</span> <span class='kw'>=</span> <span class='fl'>30</span>, <span class='kw'>cell_size</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>circles</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pred_dat</th>
      <td><p>The <code>predictions</code> element of the output from
<code><a href='survey-spatial-modelling.html'>fit_survey_sets()</a></code>.</p></td>
    </tr>
    <tr>
      <th>raw_dat</th>
      <td><p>The <code>data</code> element of the output from <code><a href='survey-spatial-modelling.html'>fit_survey_sets()</a></code>.</p></td>
    </tr>
    <tr>
      <th>fill_column</th>
      <td><p>The name of the column to plot. Options are <code>"combined"</code>
for the combined model, <code>"bin"</code> for the binary component model, or <code>"pos"</code>
for the positive component model.</p></td>
    </tr>
    <tr>
      <th>fill_scale</th>
      <td><p>A ggplot <code>scale_fill_*</code> object.</p></td>
    </tr>
    <tr>
      <th>colour_scale</th>
      <td><p>A ggplot <code>scale_colour_*</code> object. You likely want this to
match <code>fill_scale</code> unless you want the map to look strange.</p></td>
    </tr>
    <tr>
      <th>pos_pt_col</th>
      <td><p>The color for positive set location points.</p></td>
    </tr>
    <tr>
      <th>bin_pt_col</th>
      <td><p>The color for binary set location points.</p></td>
    </tr>
    <tr>
      <th>pos_pt_fill</th>
      <td><p>The fill color for positive set location points.</p></td>
    </tr>
    <tr>
      <th>pt_size_range</th>
      <td><p>The range of point sizes for positive set location
points.</p></td>
    </tr>
    <tr>
      <th>show_legend</th>
      <td><p>Logical for whether or not to show the legend.</p></td>
    </tr>
    <tr>
      <th>extrapolate_depth</th>
      <td><p>Logical for whether or not to show predictions
across all depths in the survey domain (the default) or to not extrapolate
beyond the range of the observed sets in the data set.</p></td>
    </tr>
    <tr>
      <th>extrapolation_buffer</th>
      <td><p>A buffer to add to the minimum and maximum
observed depths if <code>extrapolate_depth = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>show_model_predictions</th>
      <td><p>Logical for whether or not to show the
geostatistical model predictions.</p></td>
    </tr>
    <tr>
      <th>show_raw_data</th>
      <td><p>Logical for whether or not to show the raw data.</p></td>
    </tr>
    <tr>
      <th>utm_zone</th>
      <td><p>The UTM zone to plot in. Should match the zone used in
<code><a href='survey-spatial-modelling.html'>fit_survey_sets()</a></code>.</p></td>
    </tr>
    <tr>
      <th>fill_label</th>
      <td><p>A label to use in the legend for the fill color.</p></td>
    </tr>
    <tr>
      <th>pt_label</th>
      <td><p>A label to use in the legend for the point size.</p></td>
    </tr>
    <tr>
      <th>rotation_angle</th>
      <td><p>An angle to rotate the entire map. Can be useful to
make a map of the BC coast take up less. Defaults to not rotating the map.
The groundfish synopsis report uses <code>rotation_angle = 40</code>.</p></td>
    </tr>
    <tr>
      <th>rotation_center</th>
      <td><p>The coordinates around which to rotate the mouth.
These should be in UTM coordinates.</p></td>
    </tr>
    <tr>
      <th>show_axes</th>
      <td><p>Logical for whether or not to show the axes.</p></td>
    </tr>
    <tr>
      <th>xlim</th>
      <td><p>X axis limits in UTM coordinates. The synopsis report uses
<code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c(360, 653)</a></code>. Defaults to the range of the data.</p></td>
    </tr>
    <tr>
      <th>ylim</th>
      <td><p>Y axis limits in UTM coordinates. The synopsis report uses
<code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c(5275, 6155)</a></code>. Defaults to the range of the data.</p></td>
    </tr>
    <tr>
      <th>x_buffer</th>
      <td><p>A buffer in UTM coordinates to extend the X axis. Mostly
useful if the axis limits aren't explicitly specified.</p></td>
    </tr>
    <tr>
      <th>y_buffer</th>
      <td><p>A buffer in UTM coordinates to extend the Y axis. Mostly
useful if the axis limits aren't explicitly specified.</p></td>
    </tr>
    <tr>
      <th>north_symbol</th>
      <td><p>Logical for whether to include a north symbol.</p></td>
    </tr>
    <tr>
      <th>north_symbol_coord</th>
      <td><p>Coordinates for the north symbol in UTM
coordinates.</p></td>
    </tr>
    <tr>
      <th>north_symbol_length</th>
      <td><p>Length of the north assemble arrow.</p></td>
    </tr>
    <tr>
      <th>cell_size</th>
      <td><p>The size of the grid cells for the model predictions.</p></td>
    </tr>
    <tr>
      <th>circles</th>
      <td><p>Logical for whether to plot the model predictions in circles.
This analysis report uses this for the IPHC survey.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A ggplot object.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>123</span>)
<span class='co'># pop_surv &lt;- get_survey_sets("pacific ocean perch")</span>
<span class='co'># or use built-in data:</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='survey-spatial-modelling.html'>fit_survey_sets</a></span>(<span class='no'>pop_surv</span>,
  <span class='kw'>years</span> <span class='kw'>=</span> <span class='fl'>2015</span>,
  <span class='kw'>survey</span> <span class='kw'>=</span> <span class='st'>"SYN QCS"</span>)</div><div class='output co'>#&gt; <span class='message'>Preloading interpolated depth for prediction grid...</span></div><div class='output co'>#&gt; <span class='message'>Predicting density onto grid...</span></div><div class='output co'>#&gt; <span class='message'>INLA max_edge = c(20, 100)</span></div><div class='output co'>#&gt; <span class='message'>INLA max_edge = c(20, 100)</span></div><div class='input'>
<span class='co'># The combined model:</span>
<span class='fu'>plot_survey_sets</span>(<span class='no'>fit</span>$<span class='no'>predictions</span>, <span class='no'>fit</span>$<span class='no'>data</span>, <span class='kw'>fill_column</span> <span class='kw'>=</span> <span class='st'>"combined"</span>)</div><div class='img'><img src='plot_survey_sets-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># The positive component model:</span>
<span class='fu'>plot_survey_sets</span>(<span class='no'>fit</span>$<span class='no'>predictions</span>, <span class='no'>fit</span>$<span class='no'>data</span>, <span class='kw'>fill_column</span> <span class='kw'>=</span> <span class='st'>"pos"</span>)</div><div class='img'><img src='plot_survey_sets-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># Add a custom color scale for the binary model:</span>
<span class='fu'>plot_survey_sets</span>(<span class='no'>fit</span>$<span class='no'>predictions</span>, <span class='no'>fit</span>$<span class='no'>data</span>, <span class='kw'>fill_column</span> <span class='kw'>=</span> <span class='st'>"bin"</span>) +
  <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_gradient'>scale_fill_gradient2</a></span>(<span class='kw'>midpoint</span> <span class='kw'>=</span> <span class='fl'>0.5</span>,
    <span class='kw'>high</span> <span class='kw'>=</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/scales/topics/muted'>muted</a></span>(<span class='st'>"red"</span>),
    <span class='kw'>mid</span> <span class='kw'>=</span> <span class='st'>"white"</span>,
    <span class='kw'>low</span> <span class='kw'>=</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/scales/topics/muted'>muted</a></span>(<span class='st'>"blue"</span>), <span class='kw'>limits</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>), <span class='kw'>breaks</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>0.5</span>, <span class='fl'>1</span>)) +
  <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_gradient'>scale_colour_gradient2</a></span>(<span class='kw'>midpoint</span> <span class='kw'>=</span> <span class='fl'>0.5</span>,
    <span class='kw'>high</span> <span class='kw'>=</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/scales/topics/muted'>muted</a></span>(<span class='st'>"red"</span>),
    <span class='kw'>mid</span> <span class='kw'>=</span> <span class='st'>"white"</span>,
    <span class='kw'>low</span> <span class='kw'>=</span> <span class='kw pkg'>scales</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/scales/topics/muted'>muted</a></span>(<span class='st'>"blue"</span>), <span class='kw'>limits</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>))</div><div class='output co'>#&gt; <span class='message'>Scale for 'fill' is already present. Adding another scale for 'fill', which</span>
#&gt; <span class='message'>will replace the existing scale.</span></div><div class='output co'>#&gt; <span class='message'>Scale for 'colour' is already present. Adding another scale for 'colour',</span>
#&gt; <span class='message'>which will replace the existing scale.</span></div><div class='img'><img src='plot_survey_sets-3.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sean C. Anderson, Elise A. Keppel, Andrew M. Edwards, Chris Grandin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

