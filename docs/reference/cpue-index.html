<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Commercial CPUE index standardization — fit_cpue_index • gfplot</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Commercial CPUE index standardization — fit_cpue_index" />

<meta property="og:description" content="
fit_cpue_index() fits a delta-Gamma commercial CPUE
standardization model
" />

<meta property="og:description" content="
predict_cpue_index() predicts from a delta-Gamma
commercial CPUE standardization model
" />

<meta property="og:description" content="
plot_cpue_index() plots a delta-Gamma commercial CPUE
standardization model
" />

<meta property="og:description" content="
tidy_cpue_index_coefs() extracts coefficients from a CPUE
index standardization model
" />

<meta property="og:description" content="
plot_cpue_index_coefs() plots coefficients from a CPUE index
standardization model
" />

<meta property="og:description" content="
plot_cpue_index_jk() &quot;jackknifes&quot; out terms one by one to
test the sensitivity of the standardization model to any one term.
" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gfplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pbs-assess/gfplot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Commercial CPUE index standardization</h1>
    <small class="dont-index">Source: <a href='https://github.com/pbs-assess/gfplot/blob/master/R/cpue-index.R'><code>R/cpue-index.R</code></a></small>
    <div class="hidden name"><code>cpue-index.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <ul>
<li><p><code>fit_cpue_index()</code> fits a delta-Gamma commercial CPUE
standardization model</p></li>
</ul>

    <ul>
<li><p><code>predict_cpue_index()</code> predicts from a delta-Gamma
commercial CPUE standardization model</p></li>
</ul>

    <ul>
<li><p><code>plot_cpue_index()</code> plots a delta-Gamma commercial CPUE
standardization model</p></li>
</ul>

    <ul>
<li><p><code>tidy_cpue_index_coefs()</code> extracts coefficients from a CPUE
index standardization model</p></li>
</ul>

    <ul>
<li><p><code>plot_cpue_index_coefs()</code> plots coefficients from a CPUE index
standardization model</p></li>
</ul>

    <ul>
<li><p><code>plot_cpue_index_jk()</code> "jackknifes" out terms one by one to
test the sensitivity of the standardization model to any one term.</p></li>
</ul>
    
    </div>

    <pre class="usage"><span class='fu'>fit_cpue_index</span>(<span class='no'>dat</span>, <span class='kw'>formula_binomial</span> <span class='kw'>=</span> <span class='no'>cpue</span> ~ <span class='no'>year_factor</span>,
  <span class='kw'>formula_gamma</span> <span class='kw'>=</span> <span class='no'>spp_catch</span>/<span class='no'>hours_fished</span> ~ <span class='no'>year_factor</span>)

<span class='fu'>predict_cpue_index</span>(<span class='no'>object</span>, <span class='kw'>center</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>plot_cpue_index</span>(<span class='no'>predicted_dat</span>, <span class='kw'>all_models</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>tidy_cpue_index_coefs</span>(<span class='no'>object</span>, <span class='kw'>include_scale_pars</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>plot_cpue_index_coefs</span>(<span class='no'>object</span>, <span class='kw'>regex</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>", base_[a-z]+"</span>, <span class='st'>""</span>),
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"delta"</span>, <span class='st'>"tweedie"</span>), <span class='no'>...</span>)

<span class='fu'>plot_cpue_index_jk</span>(<span class='no'>object</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"f(month)"</span>, <span class='st'>"f(vessel)"</span>,
  <span class='st'>"f(locality)"</span>, <span class='st'>"f(depth)"</span>, <span class='st'>"f(latitude)"</span>), <span class='kw'>return_data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>A data frame from <code><a href='tidy_cpue_index.html'>tidy_cpue_index()</a></code>, or a similarly
formatted data frame.</p></td>
    </tr>
    <tr>
      <th>formula_binomial</th>
      <td><p>Formula for the binomial (presence-absence) model.
See details.</p></td>
    </tr>
    <tr>
      <th>formula_gamma</th>
      <td><p>Formula for the Gamma (positive) model. See details.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>Model output from <code>fit_cpue_index()</code>.</p></td>
    </tr>
    <tr>
      <th>center</th>
      <td><p>Should the index be centered by subtracting the mean in link space?</p></td>
    </tr>
    <tr>
      <th>predicted_dat</th>
      <td><p>Input data frame, for example from <code>predict_cpue_index()</code>.</p></td>
    </tr>
    <tr>
      <th>all_models</th>
      <td><p>Logical for whether to plot all models (<code>TRUE</code>) or just the
combined model (<code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>include_scale_pars</th>
      <td><p>Logical: include observation CV and random effect
like standard deviations in parameter plot?</p></td>
    </tr>
    <tr>
      <th>regex</th>
      <td><p>A regular expression as a character vector of length 2 to
transform the coefficient names from something (element 1) to something
(element 2).</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Delta or Tweedie?</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments to pass to the tidy function.</p></td>
    </tr>
    <tr>
      <th>terms</th>
      <td><p>A character vector of terms to jackknife out.</p></td>
    </tr>
    <tr>
      <th>return_data</th>
      <td><p>Logical: should the data be returned?</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Formulas should be specified in the way a GLM formula would be specified in R
or as a GLMM with <strong>up to 2 random intercepts</strong> would be specified in
<code><a href='https://www.rdocumentation.org/packages/lme4/topics/lmer'>lme4::lmer()</a></code>. E.g. <code>pos_catch ~ year_factor + (1 | vessel)</code> or
<code>cpue ~ year_factor + (1 | vessel) + (1 | locality)</code>. Your formula
<strong>must</strong> have a predictor named <code>year_factor</code> for the other functions in this
package to interact with the output properly. The fixed effect components of
the binomial and Gamma components do not need to be the same, but the random
effect components must be the same.</p>
<p>Because of how the formula parsing is performed, you <strong>cannot</strong> include any
operations in the response variable. For example, you can't use <code>catch/effort ~ year_factor</code>. Instead you must create a new column, e.g. <code>cpue</code> and use
that as the response: <code>cpue ~ year_factor</code>.</p>
<p>You may want to take advantage of the function <code><a href='f.html'>gfplot::f()</a></code> for conveniently
turning predictors into factors with their base level set to the most common
factor level and their factor names with consistent name lengths (e.g. '001',
'020').</p>
<p>The model is internally fitted with TMB. As a result, you will have to have a
C++ compiler installed to compile the models. On Windows, search for Rtools.</p>
<p>Note that for coefficients for predictors treated as factors, the
coefficients represent the difference from the base level factor. For
example, if January was the base month, month 02 represents the estimated
difference between February and January. The default setup of the function
<code><a href='f.html'>gfplot::f()</a></code> sets the reference level as the most common factor level.</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sean C. Anderson, Elise A. Keppel, Andrew M. Edwards, Chris Grandin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

